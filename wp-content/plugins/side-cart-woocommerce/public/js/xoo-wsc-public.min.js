jQuery(document).ready(function(o){"use strict";function t(){o(".xoo-wsc-modal , body").toggleClass("xoo-wsc-active")}function c(t){o.each(t.target.classList,function(t,c){"xoo-wsc-container"==c||"xoo-wsc-close"!=c&&"xoo-wsc-opac"!=c&&"xoo-wsc-basket"!=c&&"xoo-wsc-cont"!=c||o(".xoo-wsc-modal , body").removeClass("xoo-wsc-active")})}function a(){var t=o(".xoo-wsc-header").outerHeight(),c=o(".xoo-wsc-footer").outerHeight(),a=o(window).height();o(".xoo-wsc-body").outerHeight(a-(t+c))}function n(t){var c=(t.fragments,t.cart_hash,t.fragments["div.widget_shopping_cart_content"]);o(".woofc-trigger").css("transform","scale(1)"),o(".shopping-cart-inner").html(c);var a=o(".cart_list:first").find("li").length;o(".shopping-cart span.counter , ul.woofc-count li").html(a)}function i(c,a){o.ajax({url:xoo_wsc_localize.adminurl,type:"POST",data:{action:"add_to_cart",product_data:a},success:function(o,a,n){c.find(".xoo-wsc-icon-atc").attr("class","xoo-wsc-icon-checkmark xoo-wsc-icon-atc"),1==xoo_wsc_localize.auto_open_cart&&t(),s(o)}})}function s(t){0===t.items_count?o("a.xoo-wsc-chkt,a.xoo-wsc-cart").hide():o("a.xoo-wsc-chkt,a.xoo-wsc-cart").show(),o(".xoo-wsc-content").html(t.cart_markup),o(".xoo-wsc-items-count").html(t.items_count),a(),t.ajax_fragm&&n(t.ajax_fragm)}function e(t,c){o(".xoo-wsc-updating").show(),o.ajax({url:xoo_wsc_localize.adminurl,type:"POST",data:{action:"update_cart",cart_key:t,new_qty:c},success:function(t){s(t),o(".xoo-wsc-updating").hide()}})}o(".xoo-wsc-basket").on("click",t),xoo_wsc_localize.added_to_cart&&t(),o(".xoo-wsc-close , .xoo-wsc-opac , .xoo-wsc-cont").click(function(o){o.preventDefault(),c(o)}),a(),o(window).resize(function(){a()}),o(document).on("click",".xoo-wsc-remove",function(t){t.preventDefault();var c=o(this).parents(".xoo-wsc-product"),a=c.data("xoo_wsc");e(a,0)}),1==xoo_wsc_localize.ajax_atc&&o(document).on("submit","form.cart",function(t){t.preventDefault();var c=o(this).find(".single_add_to_cart_button");0!==c.find(".xoo-wsc-icon-atc").length?c.find(".xoo-wsc-icon-atc").attr("class","xoo-wsc-icon-spinner xoo-wsc-icon-atc xoo-wsc-active"):c.append('<span class="xoo-wsc-icon-spinner xoo-wsc-icon-atc xoo-wsc-active"></span>');var a=parseInt(o(this).find("[name=variation_id]").val()),n=parseInt(o(this).find("[name=add-to-cart]").val()),s=parseInt(o(this).find(".quantity").find(".qty").val()),e={};if(a){var r=o(this).find(".variations select"),d={};r.each(function(){d[o(this).data("attribute_name")]=o(this).val()}),d=JSON.stringify(d),e.attributes=d,e.variation_id=a}e.product_id=n,e.quantity=s,i(c,JSON.stringify(e))}),o(".add_to_cart_button").on("click",function(t){var c,a,n=o(this);if(!n.hasClass("product_type_variable")){if(t.preventDefault(),0!==n.find(".xoo-wsc-icon-atc").length?n.find(".xoo-wsc-icon-atc").attr("class","xoo-wsc-icon-spinner xoo-wsc-icon-atc xoo-wsc-active"):n.append('<span class="xoo-wsc-icon-spinner xoo-wsc-icon-atc xoo-wsc-active"></span>'),c=n.data("product_id"),void 0===c||null===c){var s=o(this).attr("href");if(-1===s.indexOf("?add-to-cart"))return;var e=s.substring(s.indexOf("?add-to-cart")+1).split("&"),r=[];if(o.each(e,function(o,t){r.push(t.split("="))}),o.each(r,function(o,t){"add-to-cart"==t[0]?c=t[1]:"quantity"==t[0]&&(a=t[1])}),!c)return}var d={};d.product_id=c,d.quantity=a||1,i(n,JSON.stringify(d))}})});